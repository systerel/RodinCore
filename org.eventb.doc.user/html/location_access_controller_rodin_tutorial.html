<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Content generated by Mediawiki and mw2html -->
<html dir="ltr" lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
				<meta content="Location Access Controller (Rodin Tutorial),Customizing a perspective suitable for RODIN (Rodin Tutorial),Index (Rodin Tutorial),Mathematical proofs (Rodin Tutorial)" name="keywords" />
		<link href="http://wiki.event-b.org/favicon.ico" rel="shortcut icon" />
		<link href="http://wiki.event-b.org/opensearch_desc.php" rel="search" title="Event-B (English)" type="application/opensearchdescription+xml" />
<link href="http://wiki.event-b.org/index.php?title=Special:Recentchanges&amp;feed=rss" rel="alternate" title="Event-B RSS Feed" type="application/rss+xml" />
<link href="http://wiki.event-b.org/index.php?title=Special:Recentchanges&amp;feed=atom" rel="alternate" title="Event-B Atom Feed" type="application/atom+xml" />
		<title>Location Access Controller (Rodin Tutorial) - Event-B</title>
		<style media="screen, projection" type="text/css">/*<![CDATA[*/
			@import "shared.css";
			@import "main.css";
		/*]]>*/</style>
		<link href="commonprint.css" media="print" rel="stylesheet" type="text/css" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "ie50fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "ie55fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "ie60fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "ie70fixes.css";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="iefixes.js_116"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type="text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgScript = "/index.php";
var wgServer = "http://wiki.event-b.org";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Location_Access_Controller_(Rodin_Tutorial)";
var wgTitle = "Location Access Controller (Rodin Tutorial)";
var wgAction = "view";
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
var wgArticleId = "81";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = "9666";
var wgVersion = "1.12.0";
var wgEnableAPI = true;
var wgEnableWriteAPI = true;
/*]]>*/</script>
                
		<script src="wikibits.js_116" type="text/javascript"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script src="ajax.js_116" type="text/javascript"></script>
		<script src="http://wiki.event-b.org/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook" type="text/javascript"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "http://wiki.event-b.org/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "http://wiki.event-b.org/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "http://wiki.event-b.org/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
	</head>
<body class="mediawiki ns-0 ltr page-Location_Access_Controller_Rodin_Tutorial">
	<div id="globalWrapperHacked">
		<div id="column-content">
	<div id="content">
		<a id="top" name="top"></a>
				<h1 class="firstHeading">Location Access Controller (Rodin Tutorial)</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Event-B</h3>
			<!-- ('div', {'id': 'contentSub'}) ('/div', {}) -->
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<div class="navigation"><table border="2" cellpadding="3" cellspacing="4" rules="all" style="border:2px solid #999999; margin:1em 1em 1em 0;"><tr><td style="vertical-align:sub;"><b>&lt;</b><small>prev:</small> <a href="customizing_a_perspective_suitable_for_rodin_rodin_tutorial.html" title="Customizing a perspective suitable for RODIN (Rodin Tutorial)">Customizing a perspective suitable for RODIN</a></td> <td style="vertical-align:sub;"><b>&gt;</b><small>next:</small> <a href="mathematical_proofs_rodin_tutorial.html" title="Mathematical proofs (Rodin Tutorial)">Mathematical proofs</a></td> <td style="vertical-align:sub;"><b>^</b><small>up:</small> <a href="index_rodin_tutorial1.html" title="Index (Rodin Tutorial)">Index</a></td></tr></table></div><div>
<table class="wikitable" style="font-style:italic; text-align: center; font-size:120%; border: 3px dashed red;">

<tr>
<th scope="col"> Do not edit!  This content has been migrated to Subversion.
</th></tr>
<tr>
<td>(<a class="external text" href="http://www.stups.uni-duesseldorf.de/~jenkins/org.rodinp.handbook.feature/build/html/" rel="nofollow" title="http://www.stups.uni-duesseldorf.de/~jenkins/org.rodinp.handbook.feature/build/html/">Nightly Handbook Build</a>)
</td></tr></table>
<p>In this section, we will take a closer look at a few more complex proofs. For this, we will use the model of the Location Access Controller, which is available as a Rodin project archive. Explanations on the model can be found in the chapter entitled “Location Access Controller” of the Event-B book. Our task is to develop the proofs for deadlock freeness of the initial model and of the first refinement.
</p><p><br />
</p><p>Import <a class="external text" href="http://sourceforge.net/projects/rodin-b-sharp/files/Doc_%20Tutorial/1.1/Doors.zip/download" rel="nofollow" title="http://sourceforge.net/projects/rodin-b-sharp/files/Doc_%20Tutorial/1.1/Doors.zip/download"><tt>Doors.zip</tt></a>. Looking through it, you will see that everything already has been proved. This is true, however, RODIN does not do any deadlock freeness proof yet, so you will have to add them yourself.
</p>
<a name="Initial_Model"></a><h2> <span class="mw-headline"> Initial Model </span></h2>
<p>First, let us look at the initial model, constisting of <tt>doors_ctx1</tt> and <tt>doors_0</tt>. There are two carrier sets in the model, one for people and one for locations. Then, there is a location called <span class="texhtml"><i>o</i><i>u</i><i>t</i><i>s</i><i>i</i><i>d</i><i>e</i></span> and a relation <span class="texhtml"><i>a</i><i>u</i><i>t</i></span> which reflects where people are allowed to go. Everyone is allowed to go <span class="texhtml"><i>o</i><i>u</i><i>t</i><i>s</i><i>i</i><i>d</i><i>e</i></span>. The model only has one event, which changes the location of a person. So, proof of deadlock freeness means proving, that someone can always change room.
</p>
<ol><li> Add a new derived invariant to <tt>doors_0</tt> called “DLF” (making it derived means clicking the "theorem" button) and change the predicate so that it is the disjunction of all guards (since there is only one guard here, it would be <img alt="\exists p, l \cdot ( p \mapsto l \in aut \wedge sit(p) \neq l)" class="tex" src="images/math_3664.png" />.
</li><li> Save the machine. You will see that the autoprover fails to prove the theorem (<tt>DLF/THM</tt>). Let us analyze whether this is an inconsistency in the model. In order to succeed with the proof, we need a tuple <img alt="p \mapsto l" class="tex" src="images/math_7016.png" /> that is in <span class="texhtml"><i>a</i><i>u</i><i>t</i></span>, but not in <span class="texhtml"><i>s</i><i>i</i><i>t</i></span>. Searching the hypotheses, we find AXM4 of <tt>doors_ctx1</tt>, which states that there is a location <span class="texhtml"><i>l</i></span>, where everyone is allowed to go. So, for every person <span class="texhtml"><i>p</i></span> in <span class="texhtml"><i>P</i></span>, <img alt="p \mapsto l" class="tex" src="images/math_7016.png" /> and <img alt="p \mapsto outside" class="tex" src="images/math_d34f.png" /> is in <span class="texhtml"><i>a</i><i>u</i><i>t</i></span>. Since these are different, at least one of them cannot be in the function <span class="texhtml"><i>s</i><i>i</i><i>t</i></span>. Now, all we would need to prove is that <span class="texhtml"><i>P</i></span> is nonempty. This holds, as carrier sets always are nonempty, but is a bit hard to derive. In the Proof Control view, first disable the post-tactics (there is a dedicated button in this view on the top right corner, up to the toolbar). Then add the hypothesis <img alt="\exists x . x \in P " class="tex" src="images/math_a3c0.png" /> using the ah button. Then, click on the Auto Prover button (The button with a robot on it). Other provers do not work here. After successfully adding the hypothesis, we can conclude the proof as follows:
</li><li> Click on the existential quantifier of the expression <img alt="\exists x \cdot x \in P " class="tex" src="images/math_0ce0.png" /> (appearing in the selected hypothesis). You see that it is automatically instantiated, it leads to the selected hypothesis <img alt=" x \in P" class="tex" src="images/math_4107.png" />. We can now instantiate <span class="texhtml"><i>p</i></span> in the goal with <span class="texhtml"><i>x</i></span>&nbsp;: enter <tt>x</tt> in the yellow box corresponding to p in the Goal view and click on the existential quantifer.
</li><li> It remains now to instantiate<span class="texhtml"><i>l</i></span>. In order to instantiate it, we need a case distinction. Type <span class="texhtml"><i>s</i><i>i</i><i>t</i>(<i>x</i>) = <i>l</i></span> this into the proof control and click on Case Distinction (dc) to look at the two cases <span class="texhtml"><i>s</i><i>i</i><i>t</i>(<i>x</i>) = <i>l</i></span> and <img alt="sit(x) \neq l" class="tex" src="images/math_9dc8.png" />. Before starting with the cases, the prover now wants you to prove that <img alt="x \in dom(sit)" class="tex" src="images/math_b62a.png" />. This can be done with p0, as <span class="texhtml"><i>s</i><i>i</i><i>t</i></span> is a total function. In the first case <span class="texhtml"><i>x</i></span> is situated in <span class="texhtml"><i>l</i></span>, so it cannot be in <span class="texhtml"><i>o</i><i>u</i><i>t</i><i>s</i><i>i</i><i>d</i><i>e</i></span>. So, you can instantiate <span class="texhtml"><i>l</i></span> with <span class="texhtml"><i>o</i><i>u</i><i>t</i><i>s</i><i>i</i><i>d</i><i>e</i></span> (type <span class="texhtml"><i>o</i><i>u</i><i>t</i><i>s</i><i>i</i><i>d</i><i>e</i></span> in the box corresponding to <span class="texhtml"><i>l</i></span> and click on the existential quantifier). In order to prove that <span class="texhtml"><i>x</i></span> is allowed to <span class="texhtml"><i>o</i><i>u</i><i>t</i><i>s</i><i>i</i><i>d</i><i>e</i></span>, you will need to select the hypothesis <img alt="P \times {outside} \subseteq aut" class="tex" src="images/math_2d27.png" /> (if this hypothesis doesn't appear in the search hypothesis, type <span class="texhtml"><i>o</i><i>u</i><i>t</i><i>s</i><i>i</i><i>d</i><i>e</i></span> in the proof control view and click on the "search hypothesis" button, and add it to the selected hypothesis with the green + icon next to it). Then you can finish this case with p0. If you look at the proof tree, you see that you now have reached the other branch of the case distinction. In this case, you can simply instantiate <span class="texhtml"><i>l</i></span> with <span class="texhtml"><i>l</i></span>, as <span class="texhtml"><i>x</i></span> is not situated there. Finally, click on p0 to finish the proof.
</li></ol>
<a name="First_Refinement"></a><h2> <span class="mw-headline"> First Refinement </span></h2>
<p>Now we get to a bit harder proof: The deadlock freeness proof for the first refinement. There is not much that has changed. The constant <span class="texhtml"><i>c</i><i>o</i><i>m</i></span> has been added in order to describe which rooms are connected. Additionally, we have a constant <span class="texhtml"><i>e</i><i>x</i><i>i</i><i>t</i></span>, which will be explained later. The post-tactics should still be disabled.
</p>
<ol><li> Open <tt>door_1</tt> machine and add a derived invariant (theorem) called DLF stating <img alt="\exists q, m \cdot (q \mapsto m \in aut \wedge sit(q) \mapsto m \in com)" class="tex" src="images/math_e7bc.png" /> to it, then save the file. Once again, the prover fails to prove deadlock freeness automatically.
</li><li> At the beginning of the proof, there are no selected hypothesis at all. So we need to select a few. The old deadlock freeness invariant will be useful, AXM7 of <tt>doors_ctx2</tt> too. To begin with, we try to avoid using <span class="texhtml"><i>e</i><i>x</i><i>i</i><i>t</i></span>, as we want to keep things as simple as possible. But since <span class="texhtml"><i>s</i><i>i</i><i>t</i></span> and <span class="texhtml"><i>a</i><i>u</i><i>t</i></span> are inside the invariant, we also are likely to need <img alt="sit \subseteq aut" class="tex" src="images/math_0e55.png" /> and <img alt="sit \in P \mathbin \rightarrow L" class="tex" src="images/math_fdf2.png" />.
</li><li> Once again, the prover automatically rewrites the existential quantifiers in the hypotheses. We now look at the proof. There is an easy case if <span class="texhtml"><i>s</i><i>i</i><i>t</i>(<i>p</i>) = <i>o</i><i>u</i><i>t</i><i>s</i><i>i</i><i>d</i><i>e</i></span>. Add this case as previously with a case distinction (dc) and solve it.  For <span class="texhtml"><i>q</i></span>, the choice <span class="texhtml"><i>p</i></span> is obvious. For <span class="texhtml"><i>m</i></span>,  you will use the existential quantifier of AXM7 to instantiate <span class="texhtml"><i>m</i></span> with <span class="texhtml"><i>l</i></span> as <span class="texhtml"><i>l</i>0</span>.
</li><li> For the other case, we will need the notion of <span class="texhtml"><i>e</i><i>x</i><i>i</i><i>t</i></span>. The axioms about <span class="texhtml"><i>e</i><i>x</i><i>i</i><i>t</i></span> state that
<ul><li> (AXM 3) Every room except the outside has exactly one exit.
</li><li> (AXM 4) An exit must be a room that communicates with the current one.
</li><li> (AXM 5) A chain of exits leads to the outside without any cycles or infinite paths.
</li><li> (AXM 6) Everyone allowed in a room is allowed to go through its exit.
</li></ul>
</li></ol>
<p>In our proof, we still need to show that anyone who is not outside can walk through a door. For this, AXM 5 is useless, so we add all hypothesis containing <span class="texhtml"><i>e</i><i>x</i><i>i</i><i>t</i></span> except for AXM 5. Now we only need to instantiate <span class="texhtml"><i>q</i></span> and <span class="texhtml"><i>m</i></span> correctly and concluding the proof should not be too hard. Once again, for <span class="texhtml"><i>q</i></span>, the choice <span class="texhtml"><i>p</i></span> is obvious. But it is not quite as easy for <span class="texhtml"><i>m</i></span>. Expressed in language, <span class="texhtml"><i>m</i></span> must be the room behind the exit door of the room that <span class="texhtml"><i>p</i></span> is currently in. Try translating this into set theory. But do not worry if you get it wrong. You can still go back in the proof by right-clicking at the desired point in the proof tree and choosing prune.
</p>
</div>
<div class="navigation"><table border="2" cellpadding="3" cellspacing="4" rules="all" style="border:2px solid #999999; margin:1em 1em 1em 0;"><tr><td style="vertical-align:sub;"><b>&lt;</b><small>prev:</small> <a href="customizing_a_perspective_suitable_for_rodin_rodin_tutorial.html" title="Customizing a perspective suitable for RODIN (Rodin Tutorial)">Customizing a perspective suitable for RODIN</a></td> <td style="vertical-align:sub;"><b>&gt;</b><small>next:</small> <a href="mathematical_proofs_rodin_tutorial.html" title="Mathematical proofs (Rodin Tutorial)">Mathematical proofs</a></td> <td style="vertical-align:sub;"><b>^</b><small>up:</small> <a href="index_rodin_tutorial1.html" title="Index (Rodin Tutorial)">Index</a></td></tr></table></div>

<!-- 
NewPP limit report
Preprocessor node count: 272/1000000
Post-expand include size: 1934/2097152 bytes
Template argument size: 808/2097152 bytes
-->

<!-- Saved in parser cache with key mediawiki_eventb:pcache:idhash:81-0!1!0!!en!2!edit=0 and timestamp 20110725154432 -->
<div class="printfooter">
Retrieved from "<a href="">http://wiki.event-b.org/index.php/Location_Access_Controller_%28Rodin_Tutorial%29</a>"</div>
			<div id="catlinks"><p class="catlinks"><a href="http://wiki.event-b.org/index.php/Special:Categories" title="Special:Categories">Categories</a>: <span dir="ltr"><a href="http://wiki.event-b.org/index.php/Category:User_documentation" title="Category:User documentation">User documentation</a></span> | <span dir="ltr"><a href="http://wiki.event-b.org/index.php/Category:Rodin_Platform" title="Category:Rodin Platform">Rodin Platform</a></span> | <span dir="ltr"><a href="http://wiki.event-b.org/index.php/Category:Tutorial" title="Category:Tutorial">Tutorial</a></span></p></div>			<!-- end content --><!-- ('div', {'class': 'visualClear'}) ('/div', {}) --></div></div></div>
    <div id="column-one">
      <!-- ('div', {'id': 'p-cactions', 'class': 'portlet'}) ('/div', {}) -->
      <!-- ('div', {'class': 'portlet', 'id': 'p-personal'}) ('/div', {}) -->
      <!-- ('div', {'class': 'portlet', 'id': 'p-logo'}) ('/div', {}) -->
      <div class="portlet" id="p-nav">
  
      </div>
      <!-- ('div', {'id': 'p-search', 'class': 'portlet'}) ('/div', {}) -->
      <!-- ('div', {'class': 'portlet', 'id': 'p-tb'}) ('/div', {}) -->
    </div>
    <!-- end left column -->
  <!-- end of the left (by default at least) column -->
			<!-- ('div', {'class': 'visualClear'}) ('/div', {}) -->
			<div id="footerHacked">
				<ul id="f-list">
				<li id="lastmod"> This page was last modified 11:49, 12 July 2011.</li>
				<li id="viewcount">This page has been accessed 2,302 times.</li>
				<li id="privacy"><a href="http://wiki.event-b.org/index.php/Event-B:Privacy_policy" title="Event-B:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="http://wiki.event-b.org/index.php/Event-B:About" title="Event-B:About">About Event-B</a></li>
				<li id="disclaimer"><a href="http://wiki.event-b.org/index.php/Event-B:General_disclaimer" title="Event-B:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served in 0.217 secs. --><br /></body></html>
